<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>외식 갤러리 - Jungle Food</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Outside.css') }}">
</head>
<body>
  <header>
    <h1>Restaurant</h1>
    <a href="{{ url_for('main_page') }}" class="back-btn">메인으로</a>
  </header>

  <main>
    <div id="map" style="width:100%;height:350px;"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=602f6de5c313013c3c677ff954acc4d0&libraries=services"></script>
  <script type="text/javascript">
    var infowindow = new kakao.maps.InfoWindow({zIndex:1});
    var mapContainer = document.getElementById('map'), 
    mapOption = { 
        center: new kakao.maps.LatLng(37.269703996199404, 127.20784395278321), 
        level: 4
    };
    var map = new kakao.maps.Map(mapContainer, mapOption); 
    var ps = new kakao.maps.services.Places(map); 
    ps.categorySearch('FD6', placesSearchCB, {useMapBounds:true}); 
    ps.categorySearch('CS2', placesSearchCB, {useMapBounds:true});
    function placesSearchCB (data, status, pagination) {
    if (status === kakao.maps.services.Status.OK) {
        for (var i=0; i<data.length; i++) {
            displayMarker(data[i]);    
        }       
      }
    }
    function displayMarker(place) {
    // 마커를 생성하고 지도에 표시합니다
    var marker = new kakao.maps.Marker({
        map: map,
        position: new kakao.maps.LatLng(place.y, place.x) 
    });

    // 마커에 클릭이벤트를 등록합니다
    kakao.maps.event.addListener(marker, 'click', function() {
        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
        infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
        infowindow.open(map, marker);
    });
}
    var markerPosition  = new kakao.maps.LatLng(37.269703996199404, 127.20784395278321); 
    var marker = new kakao.maps.Marker({ 
      position: markerPosition
    }); 
    marker.setMap(map);

    var mapContainer = document.getElementById('map');
    mapContainer.style.width = '1500px';
    mapContainer.style.height = '350px'; 
    map.relayout();

    function loadPosts() {
    const posts = JSON.parse(localStorage.getItem('posts') || '[]');
    const tbody = document.getElementById("postList");
    tbody.innerHTML = "";

    const deliveryPosts = posts.filter(p => p.board === "Outside");

    deliveryPosts.forEach((post, idx) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${idx + 1}</td>
        <td>${post.title}</td>
        <td>${post.created_at}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // 페이지 로드 시 실행
  loadPosts();

  </script>

    <table class="post-list">
      <thead>
        <tr>
          <th>번호</th>
          <th>제목</th>
          <th>날짜</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>맛있는 파스타 집 추천</td>
          <td>2025-09-01</td>
        </tr>
        <tr>
          <td>2</td>
          <td>동네 삼겹살 맛집</td>
          <td>2025-08-28</td>
        </tr>
        <tr>
          <td>3</td>
          <td>가성비 초밥 뷔페</td>
          <td>2025-08-25</td>
        </tr>
      </tbody>
    </table>
  </main>
</body>
</html>
