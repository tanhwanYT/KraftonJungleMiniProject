<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8"><title>로그인</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap"
    rel="stylesheet">
</head>
<body>
  <h2>Login</h2>
  <form id="loginForm">
    <input id="username" placeholder="Id" required>
    <input id="password" type="password" placeholder="password" required>
    <button type="submit">Login</button>
  </form>

  <script>
  const LOGIN_API = "{{ url_for('login_api') }}";
  const MAIN_PAGE = "{{ url_for('main_page') }}";

  document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value;

    try {
      const res = await fetch(LOGIN_API, {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify({ username, password })
      });
      if (!res.ok) { alert("서버 오류"); return; }
      const data = await res.json();
      data.success ? location.href = MAIN_PAGE
                   : alert("아이디 또는 비밀번호가 올바르지 않습니다.");
    } catch (err) {
      console.error(err); alert("네트워크 오류");
    }
  });
  </script>
</body>
</html>

